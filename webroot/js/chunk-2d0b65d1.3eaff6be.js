(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b65d1"],{"1d9a":function(t,a,n){"use strict";n.r(a);var s=function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{staticClass:"chat-page"},[n("audio",{attrs:{id:"audioPlay",src:"/prompt.mp3"}}),n("nav",{staticClass:"navbar navbar-expand-lg navbar-light bg-light"},[n("div",{staticClass:"navbar-brand",on:{click:function(a){return t.$router.go(-1)}}},[n("i",{staticClass:"bi bi-backspace"}),t._v(" 系统消息 ")]),t._m(0),n("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarSupportedContent"}},[n("ul",{staticClass:"navbar-nav mr-auto"},[n("li",{staticClass:"nav-item"},[n("div",{staticClass:"nav-link",on:{click:t.empty}},[t._v("清空聊天记录")])]),n("li",{staticClass:"nav-item"},[n("div",{staticClass:"nav-link",on:{click:t.logout}},[t._v("退出登录")])])])])]),n("div",{staticClass:"chat-list container"},t._l(t.list,(function(a){return n("div",{key:a.id,staticClass:"chat"},[n("div",{staticClass:"chat-userName"},[t._v(" 系统消息 "),n("small",[t._v("["+t._s(a.Type)+"]")])]),n("div",{staticClass:"chat-content alert alert-primary",attrs:{"data-container":"body","data-toggle":"popover","data-placement":"top","data-content":"Top popover"},on:{"!click":function(a){return t.chatClick.apply(null,arguments)}}},[n("div",{staticClass:"chat-text"},[t._v(t._s(a.Txt))]),a.Result||"ok_no"!=a.Operation?n("div",{staticClass:"chat-text"},[t._v(t._s(t.ResultToStr(a.Result)))]):n("div",{staticClass:"btn-group chat-buttonGroup btn-group-sm btn-block",attrs:{role:"group"}},[n("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(n){return t.no(a)}}},[t._v(" 拒绝 ")]),n("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(n){return t.ok(a)}}},[t._v(" 接受 ")])]),n("div",[n("small",{attrs:{to:""}},[t._v(t._s(t.moment(a.CreatedAt,t.nowtime)))])])]),n("div",[n("small",[t._v(t._s(a.Ip))]),n("small",[t._v(" "+t._s(a.IpAddr))])])])})),0)])},o=[function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"}},[n("span",{staticClass:"navbar-toggler-icon"})])}],e=(n("ac1f"),n("5319"),n("c0d6")),i=n("c1df"),c=n.n(i),l={name:"SystemSession",data:function(){return{store:e["a"],list:[],nowtime:new Date}},created:function(){var t=this;this.loadData((function(){t.$nextTick((function(){this.chatListToEnd()}))})),e["a"].e.on("system",(function(a){console.log(t),t.list.push(a),t.chatListIsEnd()&&t.$nextTick((function(){this.chatListToEnd()}))}))},beforeDestroy:function(){console.log("销毁")},methods:{loadData:function(t){var a=this;e["a"].http.get("/api/get_systemchat").then((function(n){a.list=n.data.list,t&&t()}))},send:function(){e["a"].send(this.text),this.text=""},ResultToStr:function(t){switch(t){case"ok":return"您已同意该请求";case"no":return"您已拒绝该请求"}},chatClick:function(t,a,n,s){console.log(t,this)},moment:function(t,a){return c()(t).fromNow()},chatListToEnd:function(){var t=this.$el.querySelector(".chat-list");t.scrollTop=t.scrollHeight},chatListIsEnd:function(){var t=this.$el.querySelector(".chat-list"),a=t.clientHeight+t.scrollTop;return a>=t.scrollHeight},logout:function(){localStorage.userName=localStorage.toKen="",e["a"].router.replace("/"),location.reload()},empty:function(){e["a"].empty()},ok:function(t){var a=this;e["a"].http.post("/api/operation_systemchat/"+t.ID,{result:"ok",exint:t.ExInt}).then((function(t){a.loadData((function(){})),t.data.state||alert(t.data.message)}))},no:function(t){var a=this;e["a"].http.post("/api/operation_systemchat/"+t.ID,{result:"no",exint:t.ExInt}).then((function(t){a.loadData((function(){})),t.data.state||alert(t.data.message)}))}}},r=l,u=n("2877"),d=Object(u["a"])(r,s,o,!1,null,"328b67de",null);a["default"]=d.exports}}]);
//# sourceMappingURL=chunk-2d0b65d1.3eaff6be.js.map